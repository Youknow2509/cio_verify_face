// src/styles/_mixins.scss

/* Breakpoints map for respond mixin */
$bps: (
  xs: 0px,
  sm: 600px,
  md: 900px,
  lg: 1200px,
  xl: 1536px
);

/* Responsive mixin */
@mixin respond($bp) {
  $value: map-get($bps, $bp);
  @if $value != null {
    @media (min-width: $value) {
      @content;
    }
  }
}

/* Fluid typography */
@mixin fluid-type($min, $max, $minvw: 320, $maxvw: 1440) {
  font-size: clamp(#{$min}, calc(#{$min} + (#{$max} - #{$min}) * ((100vw - #{$minvw}px) / (#{$maxvw} - #{$minvw}))), #{$max});
}

/* Focus ring for accessibility */
@mixin focus-ring($color: var(--color-primary), $width: 2px, $offset: 2px) {
  outline: #{$width} solid #{$color};
  outline-offset: #{$offset};
}

/* Screen reader only */
@mixin sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  overflow: hidden;
  clip: rect(0 0 0 0);
  white-space: nowrap;
  border: 0;
}

/* Text truncation */
@mixin truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Multi-line truncation */
@mixin truncate-lines($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Material Design elevation */
@mixin elevation($level) {
  @if $level == 0 {
    box-shadow: none;
  } @else if $level == 1 {
    box-shadow: var(--shadow-xs);
  } @else if $level == 2 {
    box-shadow: var(--shadow-sm);
  } @else if $level == 3 {
    box-shadow: var(--shadow-md);
  } @else if $level == 4 {
    box-shadow: var(--shadow-lg);
  } @else if $level == 5 {
    box-shadow: var(--shadow-xl);
  }
}

/* Base transition */
@mixin transition-base($property: all) {
  transition: #{$property} var(--transition-base);
}

/* Smooth transitions with reduced motion support */
@mixin transition($property: all, $duration: var(--transition-base), $easing: ease) {
  @media (prefers-reduced-motion: no-preference) {
    transition: #{$property} #{$duration} #{$easing};
  }
}

/* Scrollable table for small screens */
@mixin table-scroll() {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  
  table {
    min-width: 720px;
  }
}

/* Button reset */
@mixin button-reset {
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  font: inherit;
  color: inherit;
  cursor: pointer;
  outline: none;
  
  &:focus-visible {
    @include focus-ring;
  }
}

/* Flex center */
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Absolute center */
@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* Card style */
@mixin card {
  background: var(--color-surface);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border-light);
  @include elevation(1);
}

/* Input style */
@mixin input-base {
  width: 100%;
  padding: var(--sp-3) var(--sp-4);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  font-size: var(--fs-base);
  font-family: var(--font-family-base);
  background: var(--color-surface);
  color: var(--color-text-primary);
  @include transition(border-color);
  
  &:focus {
    outline: none;
    border-color: var(--color-border-focus);
    @include elevation(2);
  }
  
  &:disabled {
    background: var(--color-grey-100);
    color: var(--color-text-disabled);
    cursor: not-allowed;
  }
  
  &::placeholder {
    color: var(--color-text-hint);
  }
}

/* Container with max-width and padding */
@mixin container {
  margin-inline: auto;
  padding-inline: var(--sp-4);
  
  @include respond(sm) {
    padding-inline: var(--sp-5);
  }
  
  @include respond(md) {
    max-width: 1100px;
    padding-inline: var(--sp-6);
  }
  
  @include respond(lg) {
    max-width: 1280px;
  }
}

/* Safe area insets for devices with notch */
@mixin safe-area-insets {
  padding-top: env(safe-area-inset-top);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
}