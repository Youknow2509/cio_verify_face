// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.27.0
// source: device.sql

package database

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const blockDeviceToken = `-- name: BlockDeviceToken :exec
UPDATE devices
SET
    token = NULL,
    status = 0,
    updated_at = NOW()
WHERE device_id = $1
`

func (q *Queries) BlockDeviceToken(ctx context.Context, deviceID pgtype.UUID) error {
	_, err := q.db.Exec(ctx, blockDeviceToken, deviceID)
	return err
}

const checkTokenDevice = `-- name: CheckTokenDevice :one
SELECT status
FROM devices
WHERE device_id = $1 AND token = $2
`

type CheckTokenDeviceParams struct {
	DeviceID pgtype.UUID
	Token    string
}

func (q *Queries) CheckTokenDevice(ctx context.Context, arg CheckTokenDeviceParams) (pgtype.Int2, error) {
	row := q.db.QueryRow(ctx, checkTokenDevice, arg.DeviceID, arg.Token)
	var status pgtype.Int2
	err := row.Scan(&status)
	return status, err
}

const createDeviceToken = `-- name: CreateDeviceToken :exec
UPDATE devices
SET
    token = $2,
    status = 1,
    updated_at = NOW()
WHERE device_id = $1
`

type CreateDeviceTokenParams struct {
	DeviceID pgtype.UUID
	Token    string
}

func (q *Queries) CreateDeviceToken(ctx context.Context, arg CreateDeviceTokenParams) error {
	_, err := q.db.Exec(ctx, createDeviceToken, arg.DeviceID, arg.Token)
	return err
}

const deviceExists = `-- name: DeviceExists :one
SELECT device_id
FROM devices
WHERE device_id = $1
`

func (q *Queries) DeviceExists(ctx context.Context, deviceID pgtype.UUID) (pgtype.UUID, error) {
	row := q.db.QueryRow(ctx, deviceExists, deviceID)
	var device_id pgtype.UUID
	err := row.Scan(&device_id)
	return device_id, err
}
