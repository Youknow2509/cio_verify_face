# Environment
ENVIRONMENT=development
SERVICE_NAME=service_ai
SERVICE_ID=service_ai_001
SERVICE_WORKERS=4

# Service
SERVICE_NAME=service_ai
SERVICE_HOST=0.0.0.0
SERVICE_PORT=8082
GRPC_PORT=50053

# Compute mode: cpu or gpu (default: cpu for development)
COMPUTE_MODE=cpu

# GRPC client auth settings
GRPC_AUTH_URL=localhost:50051
GRPC_AUTH_TLS=false
GRPC_AUTH_CERT_PATH=None
GRPC_AUTH_KEY_PATH=None

# GRPC CLIENT CONFIG
GRPC_CLIENT_KEEPALIVE_TIME_MS=120000
GRPC_CLIENT_KEEPALIVE_TIMEOUT_MS=20000
GRPC_CLIENT_KEEPALIVE_PERMIT_WITHOUT_CALLS=0
GRPC_CLIENT_HTTP2_MAX_PINGS_WITHOUT_DATA=1
GRPC_CLIENT_HTTP2_MIN_TIME_BETWEEN_PINGS_MS=60000
GRPC_CLIENT_HTTP2_MIN_PING_INTERVAL_WITHOUT_DATA_MS=60000

# GRPC ATTENDANCE client settings
GRPC_ATTENDANCE_URL=localhost:50052
GRPC_ATTENDANCE_TLS=false
GRPC_ATTENDANCE_CERT_PATH=None
GRPC_ATTENDANCE_KEY_PATH=None

# Attendance Batching Service
ATTENDANCE_BATCH_MAX_SIZE=10
ATTENDANCE_BATCH_FLUSH_INTERVAL=3.0
ATTENDANCE_BATCH_MAX_PENDING=100

# Database
DATABASE_URL=postgresql://postgres:root1234@localhost:5433/cio_verify_face

# Standalone Redis
REDIS_TYPE=1 
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=root1234
REDIS_DB=0

# Sentinel Redis (comment out standalone, uncomment these)
# REDIS_TYPE=2
# REDIS_MASTER_NAME=mymaster
# REDIS_SENTINEL_ADDRS=["127.0.0.1:26379","127.0.0.1:26380","127.0.0.1:26381"]
# REDIS_PASSWORD=root1234

# Cluster Redis (comment out standalone, uncomment these)
# REDIS_TYPE=3
# REDIS_CLUSTER_ADDRS=["127.0.0.1:26379","127.0.0.1:26380","127.0.0.1:26381"]
# REDIS_ROUTE_BY_LATENCY=true
# REDIS_ROUTE_RANDOMLY=false
# REDIS_PASSWORD=root1234

# TLS Configuration (if needed)
# REDIS_USE_TLS=true
# REDIS_CERT_PATH=./config/redis/cert.pem
# REDIS_KEY_PATH=./config/redis/key.pem

# Pool Settings
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=2
REDIS_MAX_RETRIES=3

# ScyllaDB (for authentication state tracking)
SCYLLADB_HOSTS=localhost
SCYLLADB_PORT=9042
SCYLLADB_KEYSPACE=cio_verify_face
SCYLLADB_USERNAME=cassandra
SCYLLADB_PASSWORD=root1234

# MinIO (for face image storage)
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minio
MINIO_SECRET_KEY=root1234
MINIO_SECURE=false
MINIO_BUCKET_FACES=face-images
MINIO_BUCKET_VERIFICATIONS=verification-images

# Image optimization settings
# Controls bandwidth usage and storage costs
IMAGE_MAX_SIZE=1920                      # Max width/height in pixels (reduces bandwidth)
IMAGE_QUALITY=85                         # JPEG quality 1-100 (85 is good balance)
IMAGE_STORE_ENROLLMENTS=true             # Always store enrollment images
IMAGE_STORE_VERIFICATIONS=true          # Store verification images (set false to save storage)
IMAGE_STORE_FAILED_VERIFICATIONS=false   # Store failed attempts (useful for debugging)

# Model settings
FACE_DETECTOR_MODEL=retinaface_r50_v1
FACE_EMBEDDING_MODEL=arcface_r100_v1
EMBEDDING_DIMENSION=512

# Thresholds
DUPLICATE_THRESHOLD=0.85
VERIFY_THRESHOLD=0.50
MIN_FACE_SIZE=80

# Vector search settings (pgvector)
VECTOR_INDEX_REBUILD_INTERVAL=3600  # seconds (for compatibility)
VECTOR_DB_INDEX_VERSION=1

# FAISS settings
FAISS_INDEX_TYPE=Flat
FAISS_REBUILD_INTERVAL=3600

# Liveness detection
LIVENESS_ENABLED=true
LIVENESS_THRESHOLD=0.7

# Security
ENCRYPTION_KEY=your-32-byte-encryption-key-here
JWT_SECRET=your-jwt-secret-here

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# Storage (use relative paths for local dev, absolute paths for Docker)
# For local development: ./data, ./models, ./data/indexes
# For Docker: /app/data, /app/models, /app/data/indexes
STORAGE_PATH=./data
MODEL_PATH=./models
INDEX_PATH=./data/indexes

# Performance
MAX_WORKERS=4
BATCH_SIZE=32

# Retention policy (days)
SOFT_DELETE_RETENTION=30
