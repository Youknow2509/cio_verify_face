# Example configuration for service-attendance chart. Copy to config.yaml and adjust for your cluster.
server:
    name: 'cio_verify_face'
    id: 'service-attendance-node-0'
    region: 'us-west-1'
    shardId: 'shard-1'
    port: 8080
    mode: 'dev'
    degraded_threshold: 85.0
    out_of_service_threshold: 95.0

worker_attendance:
    num_workers: 5
    size_buffer_chan: 1000

service_auth:
    enabled: true
    grpc_addr: 'service-auth.cio-verify-face-dev.svc.cluster.local:50051'
    keepalive_time_ms: 120000
    keepalive_timeout_ms: 20000
    keepalive_permit_without_calls: true
    http2_max_pings_without_data: 1
    http2_min_time_between_pings_ms: 60000
    http2_min_ping_interval_without_data_ms: 60000
    tls:
        enabled: false
        cert_file: ''
        key_file: ''

grpc:
    network: 'tcp'
    host: '0.0.0.0'
    port: 50051
    keepalive_time_ms: 120000
    keepalive_timeout_ms: 20000
    http2_min_time_between_pings_ms: 60000
    keepalive_permit_without_calls: true
    tls:
        enabled: false
        cert_file: ''
        key_file: ''

policy_rate_limit:
    - name: 'ws_read'
      limit: 100
      window: '1m'

scylladb:
    authentication:
        username: cassandra
        password: change-me
    address:
        - env-cql-database.cio-verify-face-dev.svc.cluster.local:9042
    keyspace: cio_verify_face
    ssl:
        enabled: false
        certfile_path: ''
        validate: true
        userkey_path: ''
        usercert_path: ''
    maxIdleConns: 10
    maxOpenConns: 100
    connMaxLifetime: 3600

postgres:
    address:
        - env-main-database.cio-verify-face-dev.svc.cluster.local:5432
    database: cio_verify_face
    username: postgres
    password: change-me
    sslmode: disable
    sslcert: ''
    sslkey: ''
    sslrootcert: ''
    sslpassword: ''
    appname: cio_verify_face-dev
    connectionTimeout: 5
    tz: 'UTC'
    maxConns: 10
    minConns: 2
    minIdleConns: 2
    maxConnIdleTime: 300
    maxConnLifetimeJitter: 60
    healthCheckPeriod: 30

redis:
    type: 1
    use_tls: false
    cert_path: ''
    key_path: ''
    password: 'change-me'
    db: 0
    host: env-distributed-cache-master.cio-verify-face-dev.svc.cluster.local
    port: 6379
    master_name: mymaster
    sentinel_addrs:
        - env-distributed-cache-master.cio-verify-face-dev.svc.cluster.local:26379
    address:
        - env-distributed-cache-master.cio-verify-face-dev.svc.cluster.local:6379
    route_by_latency: true
    route_randomly: false
    pool_size: 10
    min_idle_conns: 2
    max_retries: 3

observability:
    enabled: true
    metrics_path: '/metrics'
    metrics_port: 9090
    tracing_enabled: true
    otlp_endpoint: 'http://jaeger.cio-verify-face-dev.svc.cluster.local:4318/v1/traces'

logger:
    folder_store: './logs'
    file_max_size: 500
    file_max_backups: 3
    file_max_age: 30
    compress: true
